<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Bootstrap, from Twitter</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="./css/bootstrap.css" rel="stylesheet">
    <link href="./css/bootstrap-responsive.css" rel="stylesheet">

    <!-- <link href="./css/style.css" rel="stylesheet"> -->
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }
      .inactive{
        border:1px solid transparent !important;
        box-shadow: none !important;
        background: transparent !important; 
      }
    </style>

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="./js/html5shiv.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="./ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="./ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="./ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="./ico/apple-touch-icon-57-precomposed.png">
    <link rel="shortcut icon" href="./ico/favicon.png">
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="brand" href="#">Password Tool</a>

          <div class="nav-collapse collapse ">
            <ul class="nav" data-bind="foreach: views">
              <li class="active"><a href="#" data-bind="text: title, click: $root.selectedView"></a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>


  <!-- Base Template -->  
    <div data-bind="with: selectedView"  class="container">
      <!-- Flash -->    
     <!--  <div class="alert alert-error" data-bind="fadeVisible:$root.flashText()">
      <span data-bind="html:$root.flashText"></span>
      <button type="button" class="close" data-dismiss="alert">×</button>
    </div> -->
      <div data-bind="template: { name: templateName, data: data }"></div>
    </div>

    <div>

    </div> <!-- /container -->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

<!-- Templates - Move Later -->
  <script id="oneTmpl" type="text/html">
    <div class="row">
      <table class="table table-hover span8" data-bind="fadeVisible: $root.isAuthenticated()">
        <thead>
          <tr>
            <th>location</th>
            <th>username</th>
            <th>password</th>
            <th>date</th>
          </tr>
        </thead>
          <tbody data-bind="foreach: passwords">
            <tr data-bind="">
            <td>
            <input type="text" placeholder="location" class="inactive"
             data-bind="value: location, 
                  editInPlace:location
                  ">
            </td>
            <td>
            <input type="text" placeholder="username" class="inactive"
             data-bind="value: username, 
                  editInPlace:username
                  ">
            </td>
            <td>
            <input type="password" placeholder="password" class="inactive"
             data-bind="value: password, 
                  editInPlace:password
                  ">
            </td>
            <td ><span data-bind="text: date">
            </td>
            <td data-bind="click:$parent.removePassword"><i class="icon-trash"></i></td>
            </tr>     
          </tbody>
      </table>

        <!-- Decryption Prompt -->

        <div class="" data-bind="fadeVisible:!$root.isAuthenticated()">
          <div class="span4 offset4 well">
            <legend>Decrypt Data</legend>
                <div class="alert alert-error" data-bind="fadeVisible:$root.flashText()">
      <span data-bind="html:$root.flashText"></span>
      <button type="button" class="close" data-dismiss="alert">×</button>
    </div>
        <textarea rows='5' class="span4" placeholder="Private Key" data-bind="value: $root.privateKey"></textarea>
        <input type="password" class="span4" placeholder="Password"  data-bind="value: decryptionPwd">
        <label class="checkbox">
          <input type="checkbox" name="remember" value="1"> Remember private key
        </label>
        <div class="btn-toolbar pull-right">
          <button href="#myModal" class="btn" data-toggle="modal">Import/New</button>
          <button class="btn-info btn" data-bind="click: decrypt, 
            text: $root.encryptedData() ? 'Decrypt' : 'No Data',
            enable: !$root.encryptedData()">Decrypt</button>      
          </div>
          
          </div>
        </div>
    </div>


        <div class="btn-toolbar">
          <button class="btn btn-primary" data-bind="click: addPassword">New Password</button>
          <button class="btn" data-bind="click: encrypt">Save</button>
        </div>
        <div>
          <textarea data-bind='value: lastSavedJson' rows='5' cols='60' > </textarea>
          <textarea data-bind='value: $root.encryptedData' rows='5' cols='60' > </textarea>
        </div>

    <!-- Import Modal -->
    <div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" >
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="myModalLabel">Import Passwords</h3>
      </div>
        <div class="modal-body">
        <label class="radio">
  <input type="radio" name="action" value="enter-data" data-bind="checked: currentAct">
  Enter PGP encrypted data
</label>
<label class="radio">
  <input type="radio" name="action" value="new-data" data-bind="checked: currentAct">
  Create new data (overiding any stored values)?
</label>
          
          <textarea rows='5' class="span6" data-bind="value: $root.encryptedData,
          fadeVisible: currentAct === 'enter-data'"> </textarea>
        </div>
      <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
        <button class="btn btn-primary">Import</button>
      </div>
    </div>
  </script>

  <script id="twoTmpl" type="text/html">
    <div class="span4 well">
        <textarea class="span4" id="new_message" name="new_message"
        placeholder="Click generate below..." rows="5" data-bind="value: $root.publicKey"></textarea>
        <textarea class="span4" id="new_message" name="new_message"
        placeholder="Click generate below..." rows="5" data-bind="value: $root.privateKey"></textarea>
        <h6 class="pull-right">Generated: <span data-bind="text: keyDate"></span></h6>
        <button class="btn btn-danger">Delete</button>
        <button class="btn btn-info" data-bind="click:genKeys">Generate New</button>
    </div>
  </script>


  <!-- JS -->
  <script src="openpgp.js"></script> 
  <script src="jquery-1.9.1.min.js"></script>
  <script src="./js/bootstrap.min.js"></script>
  <script src="knockout-2.2.1.js"></script>
  <script src="knockout.localStorage.js"></script>
  <script src="encryptor.js"></script>
  <script src="app.js"></script>
<!--   <script>document.write('<script src="http:/' + (location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1"></' + 'script>')</script> -->

  </body>
</html>
